/**
 * Minified by jsDelivr using UglifyJS v3.4.4.
 * Original file: /npm/jquery-ui@1.12.1/tests/unit/widget/core.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
define(["qunit","jquery","lib/common","ui/widget"],function(e,d,t){e.module("widget factory",{afterEach:function(){d.ui&&(delete d.ui.testWidget,delete d.fn.testWidget)}}),t.testJshint("widget"),e.test("widget creation",function(e){e.expect(5);var t,i={_create:function(){e.equal(t,"_create","create function is copied over")},creationTest:function(){e.equal(t,"creationTest","random function is copied over")}};d.widget("ui.testWidget",i),e.ok(d.isFunction(d.ui.testWidget),"constructor was created"),e.equal(typeof d.ui.testWidget.prototype,"object","prototype was created"),t="_create",d.ui.testWidget.prototype._create(),t="creationTest",d.ui.testWidget.prototype.creationTest(),e.equal(d.ui.testWidget.prototype.option,d.Widget.prototype.option,"option method copied over from base widget")}),e.test("element normalization",function(e){var t;e.expect(11),d.widget("ui.testWidget",{}),d.ui.testWidget.prototype._create=function(){this.element.appendTo("#qunit-fixture"),e.ok(this.element.is("div"),"generated div"),e.deepEqual(this.element.testWidget("instance"),this,"instance stored in .data()")},d.ui.testWidget(),d.ui.testWidget.prototype.defaultElement="<span data-test='pass'></span>",d.ui.testWidget.prototype._create=function(){e.ok(this.element.is("span[data-test=pass]"),"generated span with properties"),e.deepEqual(this.element.testWidget("instance"),this,"instance stored in .data()")},d.ui.testWidget(),t=d("<input>"),d.ui.testWidget.prototype._create=function(){e.deepEqual(this.element[0],t[0],"from element"),e.deepEqual(t.testWidget("instance"),this,"instance stored in .data()")},d.ui.testWidget({},t[0]),t=d("<div>"),d.ui.testWidget.prototype._create=function(){e.deepEqual(this.element[0],t[0],"from jQuery object"),e.deepEqual(t.testWidget("instance"),this,"instance stored in .data()")},d.ui.testWidget({},t),t=d("<div id='element-normalization-selector'></div>").appendTo("#qunit-fixture"),d.ui.testWidget.prototype._create=function(){e.deepEqual(this.element[0],t[0],"from selector"),e.deepEqual(t.testWidget("instance"),this,"instance stored in .data()")},d.ui.testWidget({},"#element-normalization-selector"),d.ui.testWidget.prototype.defaultElement=null,d.ui.testWidget.prototype._create=function(){e.ok(this.element[0]===this,"instance as element")},d.ui.testWidget()}),e.test("custom selector expression",function(e){e.expect(1);var t=d("<div>").appendTo("#qunit-fixture");d.widget("ui.testWidget",{}),t.testWidget(),e.deepEqual(d(":ui-testwidget")[0],t[0]),t.testWidget("destroy")}),e.test("jQuery usage",function(i){i.expect(14);var e,t,o,n=!1;d.widget("ui.testWidget",{getterSetterVal:5,_create:function(){i.ok(n,"create called on instantiation")},methodWithParams:function(e,t){return i.ok(!0,"method called via .pluginName(methodName)"),i.equal(e,"value1","parameter passed via .pluginName(methodName, param)"),i.equal(t,"value2","multiple parameters passed via .pluginName(methodName, param, param)"),this},getterSetterMethod:function(e){if(!e)return this.getterSetterVal;this.getterSetterVal=e},jQueryObject:function(){return d("body")}}),n=!0,e=d("<div>").on("testwidgetcreate",function(){i.ok(n,"create event triggered on instantiation")}).testWidget(),n=!1,t=e.testWidget("instance"),i.equal(typeof t,"object","instance stored in .data(pluginName)"),i.equal(t.element[0],e[0],"element stored on widget"),o=e.testWidget("methodWithParams","value1","value2"),i.equal(o,e,"jQuery object returned from method call"),o=e.testWidget("getterSetterMethod"),i.equal(o,5,"getter/setter can act as getter"),o=e.testWidget("getterSetterMethod",30),i.equal(o,e,"getter/setter method can be chainable"),i.equal(t.getterSetterVal,30,"getter/setter can act as setter"),o=e.testWidget("jQueryObject"),i.equal(o[0],document.body,"returned jQuery object"),i.equal(o.end(),e,"stack preserved"),e.testWidget("destroy"),i.equal(e.testWidget("instance"),null)}),e.test("direct usage",function(i){i.expect(9);var e,t,o,n=!1;d.widget("ui.testWidget",{getterSetterVal:5,_create:function(){i.ok(n,"create called on instantiation")},methodWithParams:function(e,t){return i.ok(!0,"method called dirctly"),i.equal(e,"value1","parameter passed via direct call"),i.equal(t,"value2","multiple parameters passed via direct call"),this},getterSetterMethod:function(e){if(!e)return this.getterSetterVal;this.getterSetterVal=e}}),e=d("<div>")[0],n=!0,t=new d.ui.testWidget({},e),n=!1,i.equal(d(e).testWidget("instance"),t,"instance stored in .data(pluginName)"),i.equal(t.element[0],e,"element stored on widget"),o=t.methodWithParams("value1","value2"),i.equal(o,t,"plugin returned from method call"),o=t.getterSetterMethod(),i.equal(o,5,"getter/setter can act as getter"),t.getterSetterMethod(30),i.equal(t.getterSetterVal,30,"getter/setter can act as setter")}),e.test("error handling",function(t){t.expect(3);var e=d.error;d.widget("ui.testWidget",{_privateMethod:function(){}}),d.error=function(e){t.equal(e,"cannot call methods on testWidget prior to initialization; attempted to call method 'missing'","method call before init")},d("<div>").testWidget("missing"),d.error=function(e){t.equal(e,"no such method 'missing' for testWidget widget instance","invalid method call on widget instance")},d("<div>").testWidget().testWidget("missing"),d.error=function(e){t.equal(e,"no such method '_privateMethod' for testWidget widget instance","invalid method call on widget instance")},d("<div>").testWidget().testWidget("_privateMethod"),d.error=e}),e.test("merge multiple option arguments",function(e){e.expect(1),d.widget("ui.testWidget",{_create:function(){e.deepEqual(this.options,{classes:{},create:null,disabled:!1,option1:"value1",option2:"value2",option3:"value3",option4:{option4a:"valuea",option4b:"valueb"}})}}),d("<div>").testWidget({option1:"valuex",option2:"valuex",option3:"value3",option4:{option4a:"valuex"}},{option1:"value1",option2:"value2",option4:{option4b:"valueb"}},{option4:{option4a:"valuea"}})}),e.test("._getCreateOptions()",function(t){t.expect(4),d.widget("ui.testWidget",{options:{option1:"valuex",option2:"valuex",option3:"value3"},_getCreateOptions:function(){var e=this._super();return t.deepEqual(e,{},"Base implementation returns empty object"),t.equal(this.window[0],window,"this.window is properly defined"),t.strictEqual(this.document[0],document,"this.document is properly defined"),{option1:"override1",option2:"overideX"}},_create:function(){t.deepEqual(this.options,{classes:{},create:null,disabled:!1,option1:"override1",option2:"value2",option3:"value3"})}}),d("<div>").testWidget({option2:"value2"})}),e.test("._getCreateEventData()",function(i){i.expect(1);var o={foo:"bar"};d.widget("ui.testWidget",{_getCreateEventData:function(){return o}}),d("<div>").testWidget({create:function(e,t){i.strictEqual(t,o,"event data")}})}),e.test("re-init",function(e){e.expect(3);var t=d("<div>"),i=[];d.widget("ui.testWidget",{_create:function(){i.push("create")},_init:function(){i.push("init")},_setOption:function(e){i.push("option"+e)}}),i=[],t.testWidget({foo:"bar"}),e.deepEqual(i,["create","init"],"correct methods called on init"),i=[],t.testWidget(),e.deepEqual(i,["init"],"correct methods call on re-init"),i=[],t.testWidget({foo:"bar"}),e.deepEqual(i,["optionfoo","init"],"correct methods called on re-init with options")}),e.test("redeclare",function(e){e.expect(2),d.widget("ui.testWidget",{}),e.equal(d.ui.testWidget.prototype.widgetEventPrefix,"testWidget"),d.widget("ui.testWidget",{}),e.equal(d.ui.testWidget.prototype.widgetEventPrefix,"testWidget")}),e.test("inheritance",function(e){e.expect(6),d.widget("ui.testWidgetBase",{options:{obj:{key1:"foo",key2:"bar"},arr:["testing"]}}),d.widget("ui.testWidgetExtension",d.ui.testWidgetBase,{options:{obj:{key1:"baz"},arr:["alpha","beta"]}}),e.equal(d.ui.testWidgetBase.prototype.widgetEventPrefix,"testWidgetBase","base class event prefix"),e.deepEqual(d.ui.testWidgetBase.prototype.options.obj,{key1:"foo",key2:"bar"},"base class option object not overridden"),e.deepEqual(d.ui.testWidgetBase.prototype.options.arr,["testing"],"base class option array not overridden"),e.equal(d.ui.testWidgetExtension.prototype.widgetEventPrefix,"testWidgetExtension","extension class event prefix"),e.deepEqual(d.ui.testWidgetExtension.prototype.options.obj,{key1:"baz",key2:"bar"},"extension class option object extends base"),e.deepEqual(d.ui.testWidgetExtension.prototype.options.arr,["alpha","beta"],"extension class option array overwrites base"),delete d.ui.testWidgetBase,delete d.fn.testWidgetBase,delete d.ui.testWidgetExtension,delete d.fn.testWidgetExtension}),e.test("._super()",function(i){var o;i.expect(9),d.widget("ui.testWidget",{method:function(e,t){return i.deepEqual(this,o,"this is correct in testWidget"),i.deepEqual(e,5,"parameter passed to testWidget"),i.deepEqual(t,20,"second parameter passed to testWidget"),e+t}}),d.widget("ui.testWidget2",d.ui.testWidget,{method:function(e,t){return i.deepEqual(this,o,"this is correct in testWidget2"),i.deepEqual(e,5,"parameter passed to testWidget2"),i.deepEqual(t,10,"parameter passed to testWidget2"),this._super(e,2*t)}}),d.widget("ui.testWidget3",d.ui.testWidget2,{method:function(e){i.deepEqual(this,o,"this is correct in testWidget3"),i.deepEqual(e,5,"parameter passed to testWidget3");var t=this._super(e,2*e);i.deepEqual(t,25,"super returned value")}}),(o=d("<div>").testWidget3().testWidget3("instance")).method(5),delete d.ui.testWidget3,delete d.fn.testWidget3,delete d.ui.testWidget2,delete d.fn.testWidget2}),e.test("._superApply()",function(o){var n;o.expect(10),d.widget("ui.testWidget",{method:function(e,t){return o.deepEqual(this,n,"this is correct in testWidget"),o.deepEqual(e,5,"parameter passed to testWidget"),o.deepEqual(t,10,"second parameter passed to testWidget"),e+t}}),d.widget("ui.testWidget2",d.ui.testWidget,{method:function(e,t){return o.deepEqual(this,n,"this is correct in testWidget2"),o.deepEqual(e,5,"parameter passed to testWidget2"),o.deepEqual(t,10,"second parameter passed to testWidget2"),this._superApply(arguments)}}),d.widget("ui.testWidget3",d.ui.testWidget2,{method:function(e,t){o.deepEqual(this,n,"this is correct in testWidget3"),o.deepEqual(e,5,"parameter passed to testWidget3"),o.deepEqual(t,10,"second parameter passed to testWidget3");var i=this._superApply(arguments);o.deepEqual(i,15,"super returned value")}}),(n=d("<div>").testWidget3().testWidget3("instance")).method(5,10),delete d.ui.testWidget3,delete d.fn.testWidget3,delete d.ui.testWidget2,delete d.fn.testWidget2}),e.test("mixins",function(e){e.expect(5);var t,i={foo:function(){e.equal(t,"foo","Methods from first mixin are copied over")}},o={bar:function(){e.equal(t,"bar","Methods from second mixin are copied over")}},n={baz:function(){e.equal(t,"baz","Methods from protoype are copied over")}},s=o.bar;d.widget("ui.testWidget",[i,o,n]),t="foo",d.ui.testWidget.prototype.foo(),t="bar",d.ui.testWidget.prototype.bar(),t="baz",d.ui.testWidget.prototype.baz(),i.foo=function(){e.ok(!1,"Changes to a mixin don't change the prototype")},t="foo",d.ui.testWidget.prototype.foo(),d.ui.testWidget.prototype.bar=function(){},e.strictEqual(o.bar,s,"Changes to a prototype don't change the mixin")}),e.test("mixins with inheritance",function(e){e.expect(4);var t,i={foo:function(){e.equal(t,"foo","Methods from first mixin are copied over")}},o={bar:function(){e.equal(t,"bar","Methods from second mixin are copied over")}},n={baz:function(){e.equal(t,"baz","Methods from parent protoype are copied over")}},s={qux:function(){e.equal(t,"qux","Methods from child protoype are copied over")}};d.widget("ui.testWidget",[i,n]),d.widget("ui.testWidget2",d.ui.testWidget,[o,s]),t="foo",d.ui.testWidget2.prototype.foo(),t="bar",d.ui.testWidget2.prototype.bar(),t="baz",d.ui.testWidget2.prototype.baz(),t="qux",d.ui.testWidget2.prototype.qux(),delete d.ui.testWidget2,delete d.fn.testWidget2}),e.test(".option() - getter",function(e){e.expect(6),d.widget("ui.testWidget",{_create:function(){}});var t,i=d("<div>").testWidget({foo:"bar",baz:5,qux:["quux","quuux"]});e.deepEqual(i.testWidget("option","x"),null,"non-existent option"),e.deepEqual(i.testWidget("option","foo"),"bar","single option - string"),e.deepEqual(i.testWidget("option","baz"),5,"single option - number"),e.deepEqual(i.testWidget("option","qux"),["quux","quuux"],"single option - array"),t=i.testWidget("option"),e.deepEqual(t,{baz:5,classes:{},create:null,disabled:!1,foo:"bar",qux:["quux","quuux"]},"full options hash returned"),t.foo="notbar",e.deepEqual(i.testWidget("option","foo"),"bar","modifying returned options hash does not modify plugin instance")}),e.test(".option() - deep option getter",function(e){e.expect(5),d.widget("ui.testWidget",{});var t=d("<div>").testWidget({foo:{bar:"baz",qux:{quux:"xyzzy"}}});e.equal(t.testWidget("option","foo.bar"),"baz","one level deep - string"),e.deepEqual(t.testWidget("option","foo.qux"),{quux:"xyzzy"},"one level deep - object"),e.equal(t.testWidget("option","foo.qux.quux"),"xyzzy","two levels deep - string"),e.equal(t.testWidget("option","x.y"),null,"top level non-existent"),e.equal(t.testWidget("option","foo.x.y"),null,"one level deep - non-existent")}),e.test(".option() - delegate to ._setOptions()",function(e){e.expect(2);var t,i=[];d.widget("ui.testWidget",{_create:function(){},_setOptions:function(e){i.push(e)}}),t=d("<div>").testWidget(),i=[],t.testWidget("option","foo","bar"),e.deepEqual(i,[{foo:"bar"}],"_setOptions called for single option"),i=[],t.testWidget("option",{bar:"qux",quux:"quuux"}),e.deepEqual(i,[{bar:"qux",quux:"quuux"}],"_setOptions called with multiple options")}),e.test(".option() - delegate to ._setOption()",function(e){e.expect(3);var t,i=[];d.widget("ui.testWidget",{_create:function(){},_setOption:function(e,t){i.push({key:e,val:t})}}),t=d("<div>").testWidget(),i=[],t.testWidget("option","foo","bar"),e.deepEqual(i,[{key:"foo",val:"bar"}],"_setOption called for single option"),i=[],t.testWidget("option","foo",void 0),e.deepEqual(i,[{key:"foo",val:void 0}],"_setOption called for single option where value is undefined"),i=[],t.testWidget("option",{bar:"qux",quux:"quuux"}),e.deepEqual(i,[{key:"bar",val:"qux"},{key:"quux",val:"quuux"}],"_setOption called with multiple options")}),e.test(".option() - deep option setter",function(n){n.expect(9),d.widget("ui.testWidget",{});var e,t=d("<div>").testWidget();function i(e,i,o){t.testWidget("instance").options.foo=e,d.ui.testWidget.prototype._setOption=function(e,t){n.deepEqual(e,"foo",o+": key"),n.deepEqual(t,i,o+": value")}}i({bar:"baz"},{bar:"qux"},"one deep"),t.testWidget("option","foo.bar","qux"),i({bar:"baz"},{bar:void 0},"one deep - value = undefined"),e=t.testWidget("option","foo.bar",void 0),n.deepEqual(e,t,"option should return widget on successful set operation"),i(null,{bar:"baz"},"null"),t.testWidget("option","foo.bar","baz"),i({bar:"baz",qux:{quux:"quuux"}},{bar:"baz",qux:{quux:"quuux",newOpt:"newVal"}},"add property"),t.testWidget("option","foo.qux.newOpt","newVal")}),e.test(".enable()",function(i){i.expect(2),d.widget("ui.testWidget",{_create:function(){},_setOption:function(e,t){i.deepEqual(e,"disabled","_setOption called with disabled option"),i.deepEqual(t,!1,"disabled set to false")}}),d("<div>").testWidget().testWidget("enable")}),e.test(".disable()",function(i){i.expect(2),d.widget("ui.testWidget",{_create:function(){},_setOption:function(e,t){i.deepEqual(e,"disabled","_setOption called with disabled option"),i.deepEqual(t,!0,"disabled set to true")}}),d("<div>").testWidget().testWidget("disable")}),e.test("._setOptionDisabled()",function(t){var i,e;t.expect(3),d.widget("ui.testWidget",{_setOptionDisabled:function(e){i(e)}}),i=function(){t.ok(!1,"._setOptionDisabled() called on init when not disabled")},d("<div>").testWidget(),i=function(e){t.strictEqual(e,!0,"._setOptionDisabled called on init when disabled")},e=d("<div>").testWidget({disabled:!0}),i=function(e){t.strictEqual(e,!1,"._setOptionDisabled called when enabling")},e.testWidget("enable"),i=function(e){t.strictEqual(e,!0,"._setOptionDisabled called when disabling")},e.testWidget("option","disabled",!0)}),e.test(".widget() - base",function(e){e.expect(2);var t=d.widget("ui.testWidget",{_create:function(){}}),i=d("<div>").testWidget();e.deepEqual(i[0],i.testWidget("widget")[0]),e.deepEqual(t,d.ui.testWidget,"$.widget returns the constructor")}),e.test(".widget() - overriden",function(e){e.expect(1);var t=d("<div>");d.widget("ui.testWidget",{_create:function(){},widget:function(){return t}}),e.deepEqual(t[0],d("<div>").testWidget().testWidget("widget")[0])}),e.test(".instance()",function(e){var t;e.expect(3),d.widget("ui.testWidget",{_create:function(){}}),t=d("<div>"),e.equal(t.testWidget("instance"),void 0,"uninitialized"),t.testWidget(),e.equal(t.testWidget("instance"),t.testWidget("instance"),"initialized"),e.equal(d().testWidget("instance"),void 0,"empty set")}),e.test("._on() to element (default)",function(t){var i,e;t.expect(12),d.widget("ui.testWidget",{_create:function(){(i=this)._on({keyup:this.keyup,keydown:"keydown"})},keyup:function(e){t.equal(i,this),t.equal(i.element[0],e.currentTarget),t.equal("keyup",e.type)},keydown:function(e){t.equal(i,this),t.equal(i.element[0],e.currentTarget),t.equal("keydown",e.type)}}),(e=d("<div></div>").testWidget().trigger("keyup").trigger("keydown")).testWidget("disable").trigger("keyup").trigger("keydown"),e.testWidget("enable").trigger("keyup").trigger("keydown"),e.testWidget("destroy").trigger("keyup").trigger("keydown")}),e.test("._on() to element with suppressDisabledCheck",function(t){var i,e;t.expect(18),d.widget("ui.testWidget",{_create:function(){(i=this)._on(!0,{keyup:this.keyup,keydown:"keydown"})},keyup:function(e){t.equal(i,this),t.equal(i.element[0],e.currentTarget),t.equal("keyup",e.type)},keydown:function(e){t.equal(i,this),t.equal(i.element[0],e.currentTarget),t.equal("keydown",e.type)}}),(e=d("<div></div>").testWidget().trigger("keyup").trigger("keydown")).testWidget("disable").trigger("keyup").trigger("keydown"),e.testWidget("enable").trigger("keyup").trigger("keydown"),e.testWidget("destroy").trigger("keyup").trigger("keydown")}),e.test("._on() to descendent",function(t){var i,e,o;t.expect(12),d.widget("ui.testWidget",{_create:function(){(i=this)._on(this.element.find("strong"),{keyup:this.keyup,keydown:"keydown"})},keyup:function(e){t.equal(i,this),t.equal(i.element.find("strong")[0],e.currentTarget),t.equal("keyup",e.type)},keydown:function(e){t.equal(i,this),t.equal(i.element.find("strong")[0],e.currentTarget),t.equal("keydown",e.type)}}),o=(e=d("<div><p><strong>hello</strong> world</p></div>").testWidget().trigger("keyup").trigger("keydown")).find("strong").trigger("keyup").trigger("keydown"),e.testWidget("disable").trigger("keyup").trigger("keydown"),o.trigger("keyup").trigger("keydown"),e.testWidget("enable").trigger("keyup").trigger("keydown"),o.trigger("keyup").trigger("keydown"),o.addClass("ui-state-disabled").trigger("keyup").trigger("keydown"),e.testWidget("destroy").trigger("keyup").trigger("keydown"),o.trigger("keyup").trigger("keydown")}),e.test("_on() with delegate",function(n){n.expect(8),d.widget("ui.testWidget",{_create:function(){var o=this.uuid;this.element={on:function(e,t){n.equal(e,"click.testWidget"+o),n.ok(d.isFunction(t))},trigger:d.noop},this.widget=function(){return{on:function(e,t,i){n.equal(t,"a"),n.equal(e,"click.testWidget"+o),n.ok(d.isFunction(i))}}},this._on({click:"handler","click a":"handler"}),this.widget=function(){return{on:function(e,t,i){n.equal(t,"form fieldset > input"),n.equal(e,"change.testWidget"+o),n.ok(d.isFunction(i))}}},this._on({"change form fieldset > input":"handler"})}}),d.ui.testWidget()}),e.test("_on() with delegate to descendent",function(t){t.expect(4),d.widget("ui.testWidget",{_create:function(){this.target=d("<p><strong>hello</strong> world</p>"),this.child=this.target.children(),this._on(this.target,{keyup:"handlerDirect","keyup strong":"handlerDelegated"}),this.child.trigger("keyup")},handlerDirect:function(e){t.deepEqual(e.currentTarget,this.target[0]),t.deepEqual(e.target,this.child[0])},handlerDelegated:function(e){t.deepEqual(e.currentTarget,this.child[0]),t.deepEqual(e.target,this.child[0])}}),d.ui.testWidget()}),e.test("_on() to common element",function(e){e.expect(4),d.widget("ui.testWidget",{_create:function(){this._on(this.document,{customevent:"_handler","with:colons":"_colonHandler","with-dashes":"_dashHandler","with-dashes:and-colons":"_commbinedHandler"})},_handler:function(){e.ok(!0,"handler triggered")},_colonHandler:function(){e.ok(!0,"colon handler triggered")},_dashHandler:function(){e.ok(!0,"dash handler triggered")},_commbinedHandler:function(){e.ok(!0,"combined handler triggered")}});var t=d("#widget").testWidget().testWidget("instance");d("#widget-wrapper").testWidget(),t.destroy(),d(document).trigger("customevent"),d(document).trigger("with:colons"),d(document).trigger("with-dashes"),d(document).trigger("with-dashes:and-colons")}),e.test("_off() - single event",function(e){e.expect(3),d.widget("ui.testWidget",{});var t,i,o=d("#widget"),n=o.testWidget().testWidget("instance");n._on(o,{foo:function(){e.ok(t,"foo called from _on")}}),o.on("foo",function(){e.ok(i,"foo called from bind")}),i=t=!0,o.trigger("foo"),t=!1,n._off(o,"foo"),o.trigger("foo")}),e.test("_off() - multiple events",function(t){t.expect(6),d.widget("ui.testWidget",{});var e,i,o=d("#widget"),n=o.testWidget().testWidget("instance");n._on(o,{foo:function(){t.ok(e,"foo called from _on")},bar:function(){t.ok(e,"bar called from _on")}}),o.on("foo bar",function(e){t.ok(i,e.type+" called from bind")}),i=e=!0,o.trigger("foo"),o.trigger("bar"),e=!1,n._off(o,"foo bar"),o.trigger("foo"),o.trigger("bar")}),e.test("_off() - all events",function(t){t.expect(6),d.widget("ui.testWidget",{});var e,i,o=d("#widget"),n=o.testWidget().testWidget("instance");n._on(o,{foo:function(){t.ok(e,"foo called from _on")},bar:function(){t.ok(e,"bar called from _on")}}),o.on("foo bar",function(e){t.ok(i,e.type+" called from bind")}),i=e=!0,o.trigger("foo"),o.trigger("bar"),e=!1,n._off(o),o.trigger("foo"),o.trigger("bar")}),e.test("._hoverable()",function(e){e.expect(10),d.widget("ui.testWidget",{_create:function(){this._hoverable(this.element.children())}});var t=d("#widget").testWidget().children();e.lacksClasses(t,"ui-state-hover","not hovered on init"),t.trigger("mouseenter"),e.hasClasses(t,"ui-state-hover","hovered after mouseenter"),t.trigger("mouseleave"),e.lacksClasses(t,"ui-state-hover","not hovered after mouseleave"),t.trigger("mouseenter"),e.hasClasses(t,"ui-state-hover","hovered after mouseenter"),d("#widget").testWidget("disable"),e.lacksClasses(t,"ui-state-hover","not hovered while disabled"),t.trigger("mouseenter"),e.lacksClasses(t,"ui-state-hover","can't hover while disabled"),d("#widget").testWidget("enable"),e.lacksClasses(t,"ui-state-hover","enabling doesn't reset hover"),t.trigger("mouseenter"),e.hasClasses(t,"ui-state-hover","hovered after mouseenter"),d("#widget").testWidget("destroy"),e.lacksClasses(t,"ui-state-hover","not hovered after destroy"),t.trigger("mouseenter"),e.lacksClasses(t,"ui-state-hover","event handler removed on destroy")}),e.test("._focusable()",function(e){e.expect(10),d.widget("ui.testWidget",{_create:function(){this._focusable(this.element.children())}});var t=d("#widget").testWidget().children();e.lacksClasses(t,"ui-state-focus","not focused on init"),t.trigger("focusin"),e.hasClasses(t,"ui-state-focus","focused after explicit focus"),t.trigger("focusout"),e.lacksClasses(t,"ui-state-focus","not focused after blur"),t.trigger("focusin"),e.hasClasses(t,"ui-state-focus","focused after explicit focus"),d("#widget").testWidget("disable"),e.lacksClasses(t,"ui-state-focus","not focused while disabled"),t.trigger("focusin"),e.lacksClasses(t,"ui-state-focus","can't focus while disabled"),d("#widget").testWidget("enable"),e.lacksClasses(t,"ui-state-focus","enabling doesn't reset focus"),t.trigger("focusin"),e.hasClasses(t,"ui-state-focus","focused after explicit focus"),d("#widget").testWidget("destroy"),e.lacksClasses(t,"ui-state-focus","not focused after destroy"),t.trigger("focusin"),e.lacksClasses(t,"ui-state-focus","event handler removed on destroy")}),e.test("._trigger() - no event, no ui",function(i){i.expect(7);var o=[];d.widget("ui.testWidget",{_create:function(){}}),d("#widget").testWidget({foo:function(e,t){i.deepEqual(e.type,"testwidgetfoo","correct event type in callback"),i.deepEqual(t,{},"empty ui hash passed"),o.push("callback")}}),d(document).add("#widget-wrapper").add("#widget").on("testwidgetfoo",function(e,t){i.deepEqual(t,{},"empty ui hash passed"),o.push(this)}),i.deepEqual(d("#widget").testWidget("instance")._trigger("foo"),!0,"_trigger returns true when event is not cancelled"),i.deepEqual(o,[d("#widget")[0],d("#widget-wrapper")[0],document,"callback"],"event bubbles and then invokes callback"),d(document).off("testwidgetfoo")}),e.test("._trigger() - cancelled event",function(e){e.expect(3),d.widget("ui.testWidget",{_create:function(){}}),d("#widget").testWidget({foo:function(){e.ok(!0,"callback invoked even if event is cancelled")}}).on("testwidgetfoo",function(){return e.ok(!0,"event was triggered"),!1}),e.deepEqual(d("#widget").testWidget("instance")._trigger("foo"),!1,"_trigger returns false when event is cancelled")}),e.test("._trigger() - cancelled callback",function(e){e.expect(1),d.widget("ui.testWidget",{_create:function(){}}),d("#widget").testWidget({foo:function(){return!1}}),e.deepEqual(d("#widget").testWidget("instance")._trigger("foo"),!1,"_trigger returns false when callback returns false")}),e.test("._trigger() - provide event and ui",function(i){i.expect(7);var o=d.Event("originalTest");d.widget("ui.testWidget",{_create:function(){},testEvent:function(){var e={foo:"bar",baz:{qux:5,quux:20}};this._trigger("foo",o,e),i.deepEqual(e,{foo:"notbar",baz:{qux:10,quux:"jQuery"}},"ui object modified")}}),d("#widget").on("testwidgetfoo",function(e,t){i.equal(e.originalEvent,o,"original event object passed"),i.deepEqual(t,{foo:"bar",baz:{qux:5,quux:20}},"ui hash passed"),t.foo="notbar"}),d("#widget-wrapper").on("testwidgetfoo",function(e,t){i.equal(e.originalEvent,o,"original event object passed"),i.deepEqual(t,{foo:"notbar",baz:{qux:5,quux:20}},"modified ui hash passed"),t.baz.qux=10}),d("#widget").testWidget({foo:function(e,t){i.equal(e.originalEvent,o,"original event object passed"),i.deepEqual(t,{foo:"notbar",baz:{qux:10,quux:20}},"modified ui hash passed"),t.baz.quux="jQuery"}}).testWidget("testEvent")}),e.test("._trigger() - array as ui",function(o){o.expect(4),d.widget("ui.testWidget",{_create:function(){},testEvent:function(){this._trigger("foo",null,[{foo:"bar",baz:{qux:5,quux:20}},{bar:5}])}}),d("#widget").on("testwidgetfoo",function(e,t,i){o.deepEqual(t,{foo:"bar",baz:{qux:5,quux:20}},"event: ui hash passed"),o.deepEqual(i,{bar:5},"event: extra argument passed")}),d("#widget").testWidget({foo:function(e,t,i){o.deepEqual(t,{foo:"bar",baz:{qux:5,quux:20}},"callback: ui hash passed"),o.deepEqual(i,{bar:5},"callback: extra argument passed")}}).testWidget("testEvent")}),e.test("._trigger() - instance as element",function(i){i.expect(4),d.widget("ui.testWidget",{defaultElement:null,testEvent:function(){this._trigger("foo",null,{foo:"bar"})}});var e=d.ui.testWidget({foo:function(e,t){i.equal(e.type,"testwidgetfoo","event object passed to callback"),i.deepEqual(t,{foo:"bar"},"ui object passed to callback")}});d(e).on("testwidgetfoo",function(e,t){i.equal(e.type,"testwidgetfoo","event object passed to event handler"),i.deepEqual(t,{foo:"bar"},"ui object passed to event handler")}),e.testEvent()}),function(){function t(e,t,i){e.expect(1);var o=!1;d.widget("ui.testWidget",{_create:function(){},destroy:function(){o=!0}}),i(),e.equal(o,t)}e.test("auto-destroy - .remove()",function(e){t(e,!0,function(){d("#widget").testWidget().remove()})}),e.test("auto-destroy - .remove() when disabled",function(e){t(e,!0,function(){d("#widget").testWidget({disabled:!0}).remove()})}),e.test("auto-destroy - .remove() on parent",function(e){t(e,!0,function(){d("#widget").testWidget().parent().remove()})}),e.test("auto-destroy - .remove() on child",function(e){t(e,!1,function(){d("#widget").testWidget().children().remove()})}),e.test("auto-destroy - .empty()",function(e){t(e,!1,function(){d("#widget").testWidget().empty()})}),e.test("auto-destroy - .empty() on parent",function(e){t(e,!0,function(){d("#widget").testWidget().parent().empty()})}),e.test("auto-destroy - .detach()",function(e){t(e,!1,function(){d("#widget").testWidget().detach()})}),e.test("destroy - remove event bubbling",function(e){t(e,!1,function(){d("<div>child</div>").appendTo(d("#widget").testWidget()).trigger("remove")})})}(),e.test("redefine",function(t){t.expect(4),d.widget("ui.testWidget",{method:function(e){t.strictEqual(this,i,"original invoked with correct this"),t.equal(e,"bar","original invoked with correct parameter")}}),d.ui.testWidget.foo="bar",d.widget("ui.testWidget",d.ui.testWidget,{method:function(e){t.equal(e,"foo","new invoked with correct parameter"),this._super("bar")}});var i=new d.ui.testWidget({});i.method("foo"),t.equal(d.ui.testWidget.foo,"bar","static properties remain")}),e.test("redefine deep prototype chain",function(t){t.expect(8),d.widget("ui.testWidget",{method:function(e){t.strictEqual(this,i,"original invoked with correct this"),t.equal(e,"level 4","original invoked with correct parameter")}}),d.widget("ui.testWidget2",d.ui.testWidget,{method:function(e){t.strictEqual(this,i,"testWidget2 invoked with correct this"),t.equal(e,"level 2","testWidget2 invoked with correct parameter"),this._super("level 3")}}),d.widget("ui.testWidget3",d.ui.testWidget2,{method:function(e){t.strictEqual(this,i,"testWidget3 invoked with correct this"),t.equal(e,"level 1","testWidget3 invoked with correct parameter"),this._super("level 2")}}),d.widget("ui.testWidget",d.ui.testWidget,{method:function(e){t.strictEqual(this,i,"new invoked with correct this"),t.equal(e,"level 3","new invoked with correct parameter"),this._super("level 4")}}),d.widget("ui.testWidget3",d.ui.testWidget3,{});var i=new d.ui.testWidget3({});i.method("level 1"),delete d.ui.testWidget3,delete d.fn.testWidget3,delete d.ui.testWidget2,delete d.fn.testWidget2}),e.test("redefine - widgetEventPrefix",function(e){e.expect(2),d.widget("ui.testWidget",{widgetEventPrefix:"test"}),e.equal(d.ui.testWidget.prototype.widgetEventPrefix,"test","cusotm prefix in original"),d.widget("ui.testWidget",d.ui.testWidget,{}),e.equal(d.ui.testWidget.prototype.widgetEventPrefix,"test","cusotm prefix in extension")}),e.test("mixins",function(e){e.expect(2);var t={method:function(){return"mixed "+this._super()}};d.widget("ui.testWidget1",{method:function(){return"testWidget1"}}),d.widget("ui.testWidget2",{method:function(){return"testWidget2"}}),d.widget("ui.testWidget1",d.ui.testWidget1,t),d.widget("ui.testWidget2",d.ui.testWidget2,t),e.equal(d("<div>").testWidget1().testWidget1("method"),"mixed testWidget1","testWidget1 mixin successful"),e.equal(d("<div>").testWidget2().testWidget2("method"),"mixed testWidget2","testWidget2 mixin successful")}),e.test("_delay",function(t){var i=t.async();t.expect(6);var o,n=0;d.widget("ui.testWidget",{defaultElement:null,_create:function(){var e=(o=this)._delay(function(){t.strictEqual(this,o),t.equal(n,1),i()},500);t.ok(void 0!==e),e=this._delay("callback"),t.ok(void 0!==e)},callback:function(){t.strictEqual(this,o),t.equal(n,0),n+=1}}),d("#widget").testWidget()}),e.test("$.widget.bridge()",function(i){i.expect(14);var e,t,o=d("<div>");function n(e,t){i.deepEqual(e,{foo:"bar"},"options passed"),i.strictEqual(t,o[0],"element passed")}d.extend(n.prototype,{method:function(e){i.ok(!0,"method called via .pluginName(methodName)"),i.equal(e,"value1","parameter passed via .pluginName(methodName, param)")},getter:function(){return"qux"},option:function(e){i.deepEqual(e,{})}}),d.widget.bridge("testWidget",n),i.ok(d.isFunction(d.fn.testWidget),"jQuery plugin was created"),i.strictEqual(o.testWidget({foo:"bar"}),o,"plugin returns original jQuery object"),e=o.data("testWidget"),i.equal(typeof e,"object","instance stored in .data(pluginName)"),i.equal(typeof o.testWidget("instance"),"object","also retrievable via instance method"),t=o.testWidget("method","value1"),i.equal(t,o,"jQuery object returned from method call"),t=o.testWidget("getter"),i.equal(t,"qux","getter returns value"),o.testWidget(),i.ok(!0,"_init is optional"),n.prototype._init=function(){i.ok("_init","_init now exists, so its called")},o.testWidget()}),e.test("$.widget.bridge() - widgetFullName",function(e){e.expect(1);var t,i=d("<div>");function o(){}o.prototype.widgetFullName="custom-widget",d.widget.bridge("testWidget",o),i.testWidget(),t=i.data("custom-widget"),e.equal(typeof t,"object","instance stored in .data(widgetFullName)")})});
//# sourceMappingURL=/sm/142c45a8c514f3cc6f942b6f17ca69dbc5968c6c295d28d3d19f41aac128b46e.map