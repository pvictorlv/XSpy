/**
 * Minified by jsDelivr using UglifyJS v3.4.4.
 * Original file: /npm/jquery-ui@1.12.1/tests/unit/autocomplete/core.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
define(["qunit","jquery","ui/widgets/autocomplete"],function(e,u){e.module("autocomplete: core"),e.test("markup structure",function(e){e.expect(2);var t=u("#autocomplete").autocomplete(),o=t.autocomplete("widget");e.hasClasses(t,"ui-autocomplete-input"),e.hasClasses(o,"ui-autocomplete ui-widget ui-widget-content")}),e.test("prevent form submit on enter when menu is active",function(e){e.expect(2);var t,o=u("#autocomplete").autocomplete({source:["java","javascript"]}).val("ja").autocomplete("search"),a=o.autocomplete("widget");(t=u.Event("keydown")).keyCode=u.ui.keyCode.DOWN,o.trigger(t),e.equal(a.find(".ui-menu-item-wrapper.ui-state-active").length,1,"menu item is active"),(t=u.Event("keydown")).keyCode=u.ui.keyCode.ENTER,o.trigger(t),e.ok(t.isDefaultPrevented(),"default action is prevented")}),e.test("allow form submit on enter when menu is not active",function(e){e.expect(1);var t,o=u("#autocomplete").autocomplete({autoFocus:!1,source:["java","javascript"]}).val("ja").autocomplete("search");(t=u.Event("keydown")).keyCode=u.ui.keyCode.ENTER,o.trigger(t),e.ok(!t.isDefaultPrevented(),"default action is prevented")}),function(){function t(e,t,o,a){e.expect(1);var n=!1,i=u(t).autocomplete({source:["a"],delay:0,minLength:0});i.autocomplete("instance")._move=function(){n=!0},i.simulate("keydown",{keyCode:o?u.ui.keyCode.UP:u.ui.keyCode.DOWN}),e.equal(n,a,"respond to arrow")}function o(e,t,o){e.expect(1);var a=u(t).autocomplete({source:["a"],delay:0,minLength:0});a.autocomplete("instance")._move=function(){e.ok(!0,"repsond to arrow")},a.autocomplete("search"),a.simulate("keydown",{keyCode:o?u.ui.keyCode.UP:u.ui.keyCode.DOWN})}function a(e,t,o,a){e.expect(1);var n=!1,i=u(t).autocomplete({source:["a"],delay:0,minLength:0});i.on("keypress",function(e){n=!e.isDefaultPrevented()}),i.simulate("keydown",{keyCode:o?u.ui.keyCode.UP:u.ui.keyCode.DOWN}),i.simulate("keypress"),e.equal(n,a,"respond to arrow")}e.test("up arrow invokes search - input",function(e){t(e,"#autocomplete",!0,!0)}),e.test("down arrow invokes search - input",function(e){t(e,"#autocomplete",!1,!0)}),e.test("up arrow invokes search - textarea",function(e){t(e,"#autocomplete-textarea",!0,!1)}),e.test("down arrow invokes search - textarea",function(e){t(e,"#autocomplete-textarea",!1,!1)}),e.test("up arrow invokes search - contenteditable",function(e){t(e,"#autocomplete-contenteditable",!0,!1)}),e.test("down arrow invokes search - contenteditable",function(e){t(e,"#autocomplete-contenteditable",!1,!1)}),e.test("up arrow moves focus - input",function(e){o(e,"#autocomplete",!0)}),e.test("down arrow moves focus - input",function(e){o(e,"#autocomplete",!1)}),e.test("up arrow moves focus - textarea",function(e){o(e,"#autocomplete-textarea",!0)}),e.test("down arrow moves focus - textarea",function(e){o(e,"#autocomplete-textarea",!1)}),e.test("up arrow moves focus - contenteditable",function(e){o(e,"#autocomplete-contenteditable",!0)}),e.test("down arrow moves focus - contenteditable",function(e){o(e,"#autocomplete-contenteditable",!1)}),e.test("up arrow moves cursor - input",function(e){a(e,"#autocomplete",!0,!1)}),e.test("down arrow moves cursor - input",function(e){a(e,"#autocomplete",!1,!1)}),e.test("up arrow moves cursor - textarea",function(e){a(e,"#autocomplete-textarea",!0,!0)}),e.test("down arrow moves cursor - textarea",function(e){a(e,"#autocomplete-textarea",!1,!0)}),e.test("up arrow moves cursor - contenteditable",function(e){a(e,"#autocomplete-contenteditable",!0,!0)}),e.test("down arrow moves cursor - contenteditable",function(e){a(e,"#autocomplete-contenteditable",!1,!0)})}(),e.test("past end of menu in multiline autocomplete",function(o){var e=o.async();o.expect(2);var a="custom value",t=u("#autocomplete-contenteditable").autocomplete({delay:0,source:["javascript"],focus:function(e,t){o.equal(t.item.value,"javascript","Item gained focus"),u(this).text(a),e.preventDefault()}});t.simulate("focus").autocomplete("search","ja"),setTimeout(function(){t.simulate("keydown",{keyCode:u.ui.keyCode.DOWN}),t.simulate("keydown",{keyCode:u.ui.keyCode.DOWN}),o.equal(t.text(),a),e()})}),e.test("ESCAPE in multiline autocomplete",function(o){var e=o.async();o.expect(2);var a="custom value",t=u("#autocomplete-contenteditable").autocomplete({delay:0,source:["javascript"],focus:function(e,t){o.equal(t.item.value,"javascript","Item gained focus"),u(this).text(a),e.preventDefault()}});t.simulate("focus").autocomplete("search","ja"),setTimeout(function(){t.simulate("keydown",{keyCode:u.ui.keyCode.DOWN}),t.simulate("keydown",{keyCode:u.ui.keyCode.ESCAPE}),o.equal(t.text(),a),e()})}),e.test("handle race condition",function(o){var e=o.async();o.expect(3);var a=0,t=u("#autocomplete").autocomplete({source:function(e,t){if(a++,1===e.term.length)return o.equal(a,1,"request with 1 character is first"),void setTimeout(function(){t(["one"]),setTimeout(n)});o.equal(a,2,"request with 2 characters is second"),t(["two"])}});function n(){o.equal(t.autocomplete("widget").find(".ui-menu-item").text(),"two","correct results displayed"),e()}t.autocomplete("search","a"),t.autocomplete("search","ab")}),e.test("simultaneous searches (#9334)",function(e){var t=e.async();e.expect(2);var o=u("#autocomplete").autocomplete({source:function(e,t){setTimeout(function(){t([e.term])})},response:function(){e.ok(!0,"response from first instance")}}),a=u("#autocomplete-textarea").autocomplete({source:function(e,t){setTimeout(function(){t([e.term])})},response:function(){e.ok(!0,"response from second instance"),t()}});o.autocomplete("search","test"),a.autocomplete("search","test")}),e.test("ARIA",function(e){e.expect(13);var t=u("#autocomplete").autocomplete({source:["java","javascript"]}),o=t.autocomplete("instance").liveRegion;e.equal(o.children().length,0,"Empty live region on create"),e.equal(o.attr("aria-live"),"assertive","Live region's aria-live attribute must be assertive"),e.equal(o.attr("aria-relevant"),"additions","Live region's aria-relevant attribute must be additions"),e.equal(o.attr("role"),"status","Live region's role attribute must be status"),t.autocomplete("search","j"),e.equal(o.children().first().text(),"2 results are available, use up and down arrow keys to navigate.","Live region for multiple values"),t.simulate("keydown",{keyCode:u.ui.keyCode.DOWN}),e.equal(o.children().filter(":visible").text(),"java","Live region changed on keydown to announce the highlighted value"),t.one("autocompletefocus",function(e){e.preventDefault()}),t.simulate("keydown",{keyCode:u.ui.keyCode.DOWN}),e.equal(o.children().filter(":visible").text(),"javascript","Live region updated when default focus is prevented"),t.autocomplete("search","javas"),e.equal(o.children().filter(":visible").text(),"1 result is available, use up and down arrow keys to navigate.","Live region for one value"),t.autocomplete("search","z"),e.equal(o.children().filter(":visible").text(),"No search results.","Live region for no values"),e.equal(o.children().length,5,"Should be five children in the live region after the above"),e.equal(o.children().filter(":visible").length,1,"Only one should be still visible"),e.ok(o.children().filter(":visible")[0]===o.children().last()[0],"The last one should be the visible one"),t.autocomplete("destroy"),e.equal(o.parent().length,0,"The liveRegion should be detached after destroy")}),e.test("ARIA, aria-label announcement",function(e){e.expect(1),u.widget("custom.catcomplete",u.ui.autocomplete,{_renderMenu:function(o,e){var a=this;u.each(e,function(e,t){a._renderItemData(o,t).attr("aria-label",t.category+" : "+t.label)})}});var t=u("#autocomplete").catcomplete({source:[{label:"anders andersson",category:"People"}]}),o=t.catcomplete("instance").liveRegion;t.catcomplete("search","a"),t.simulate("keydown",{keyCode:u.ui.keyCode.DOWN}),e.equal(o.children().filter(":visible").text(),"People : anders andersson","Live region changed on keydown to announce the highlighted value's aria-label attribute")}),e.test("ARIA, init on detached input",function(e){e.expect(1);var t=u("<input>").autocomplete({source:["java","javascript"]}).autocomplete("instance").liveRegion;e.equal(t.parent().length,1,"liveRegion must have a parent")}),e.test(".replaceWith() (#9172)",function(e){e.expect(1);var t=u("#autocomplete").autocomplete(),o="<div>test</div>",a=t.parent();t.replaceWith(o),e.equal(a.html().toLowerCase(),o)}),e.test("Search if the user retypes the same value (#7434)",function(e){var t=e.async();e.expect(3);var o=u("#autocomplete").autocomplete({source:["java","javascript"],delay:0}),a=o.autocomplete("instance").menu.element;o.val("j").simulate("keydown"),setTimeout(function(){e.ok(a.is(":visible"),"menu displays initially"),o.trigger("blur"),e.ok(!a.is(":visible"),"menu hidden after blur"),o.val("j").simulate("keydown"),setTimeout(function(){e.ok(a.is(":visible"),"menu displays after typing the same value"),t()})})}),e.test("Close on click outside when focus remains",function(e){var t=e.async();e.expect(2);var o=u("#autocomplete").autocomplete({source:["java","javascript"],delay:0}),a=o.autocomplete("widget");u("body").on("mousedown",function(e){e.preventDefault()}),o.val("j").autocomplete("search","j"),setTimeout(function(){e.ok(a.is(":visible"),"menu displays initially"),u("body").simulate("mousedown"),setTimeout(function(){e.ok(a.is(":hidden"),"menu closes after clicking elsewhere"),t()})})})});
//# sourceMappingURL=/sm/e2a49f1efbdd113435de401ecf80f485291cdad755e4f99e6f650a97a19eeb45.map